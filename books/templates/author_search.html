{% extends 'base.html' %}
{% block content %}

<h1>Search Books by Author</h1>

<form method="GET">
    {{ form.as_p }}
    <button type="submit">Search</button>
</form>

<hr>

{% if results %}
    <h2>Results:</h2>
    <ul>
        {% for book in results %}
            <li>
                <a href="{% url 'book_detail' book.id %}">
                    <strong>{{ book.title }}</strong>
                </a><br>
                Authors: 
                {% for author in book.authors %}
                    <a href="{% url 'author_detail' author %}">{{ author }}</a>{% if not forloop.last %}, {% endif %}
                {% endfor %}<br>
                Published: {{ book.published_year }}<br>
                {% if book.thumbnail %}
                    <img src="{{ book.thumbnail }}" alt="cover">
                {% endif %}
                <p>{{ book.description|slice:":250" }}...</p>
            </li>
            <hr>
        {% endfor %}
    </ul>
{% endif %}

{% endblock %}