{% extends "base.html" %}
{% block content %}
<h1>Hledání knih podle žánru</h1>

<form method="get">
    <label for="genre">Vyberte žánr:</label>
    <select name="genre_id" id="genre">
        <option value="">-- Vyberte --</option>
        {% for genre in genres %}
            <option value="{{ genre.id }}" {% if selected_genre and genre.id == selected_genre.id %}selected{% endif %}>
                {{ genre.name }}
            </option>
        {% endfor %}
    </select>
    <button type="submit">Hledat</button>
</form>

{% if books %}
    <h2>Knihy pro žánr "{{ selected_genre.name }}"</h2>
    <ul>
        {% for book in books %}
            <li>
                <a href="{{ book.get_detail_url }}">{{ book.title }}</a>
                {% for author in book.authors.all %}
                    - {{ author.first_name }} {{ author.last_name }}
                {% endfor %}
            </li>
        {% endfor %}
    </ul>
{% elif selected_genre %}
    <p>Pro tento žánr nebyly nalezeny žádné knihy.</p>
{% endif %}

{% endblock %}
