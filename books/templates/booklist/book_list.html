{% extends "base.html" %}
{% block content %}

<h1>Seznam knih</h1>

<form method="get" class="filter-form">

    <input type="text" name="title" placeholder="Hledat podle názvu"
           value="{{ request.GET.title }}" />

    <select name="genre">
        <option value="">-- žánr --</option>
        {% for g in genres %}
            <option value="{{ g.id }}"
                {% if request.GET.genre == g.id|stringformat:"s" %}selected{% endif %}>
                {{ g.name }}
            </option>
        {% endfor %}
    </select>

    <select name="author">
        <option value="">-- autor --</option>
        {% for a in authors %}
            <option value="{{ a.id }}"
                {% if request.GET.author == a.id|stringformat:"s" %} selected {% endif %}>
                {{ a.first_name }} {{ a.last_name }}
            </option>
        {% endfor %}
    </select>

    <select name="order">
        <option value="">-- Seřadit --</option>
        <option value="title" {% if request.GET.order == "title" %}selected{% endif %}>Název A-Z</option>
        <option value="-title" {% if request.GET.order == "-title" %}selected{% endif %}>Název Z-A</option>
    </select>

    <button type="submit">Filtrovat</button>
    <a href="{% url 'book_list' %}">Reset</a>
</form>

<hr>

<div class="books">
    {% for book in books %}
        <div class="book-item">

            {% if book.image %}
                <img src="{{ book.image.url }}" alt="" />
            {% endif %}

            <h3><a href="{{ book.get_detail_url }}">{{ book.title }}</a></h3>

            </p>
        </div>
    {% empty %}
        <p>Žádné knihy nenalezeny.</p>
    {% endfor %}
</div>

{% endblock %}
